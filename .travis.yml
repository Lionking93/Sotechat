language: java

jdk:
  - oraclejdk8

notifications:
  email: false
  irc:
    channels:
    - "irc.stealth.net#Sotechat"
    on_success: always
    on_failure: always
    use_notice: true
    skip_join: true
    template:
    - '#%{build_number} %{message} (%{branch} : %{author}): %{commit_message}'

addons:
    firefox: "latest"
    code_climate:
        repo_token: b3947eb04b867918f437bf3b54e5a96614e3651282214fb15a81fc62c74ce47a

before_install:
  - wget https://s3.amazonaws.com/travis-phantomjs/phantomjs-2.0.0-ubuntu-12.04.tar.bz2
  - tar -xjf phantomjs-2.0.0-ubuntu-12.04.tar.bz2
  - sudo rm -rf /usr/local/phantomjs/bin/phantomjs
  - sudo mv phantomjs /usr/local/phantomjs/bin/phantomjs
  - "export DISPLAY=:99.0"
  - "sh -e /etc/init.d/xvfb start"
  - sleep 3 # give xvfb some time to start

script :
  - mvn install -DskipTests=true -Dmaven.javadoc.skip=true -DskipITs=true -B -V
  - mvn integration-test

after_success:
  - bash <(curl -s https://codecov.io/bash)

